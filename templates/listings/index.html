{% extends "base-nexus.html" %}

{% block title %}NEXUS â€” SECURE MONERO MARKETPLACE{% endblock %}

{% block content %}

{# Hero Section #}
{% include "partials/nexus/organisms/hero.html" %}

{# Search Bar #}
<section style="max-width: 1400px; margin: 0 auto; padding: var(--nexus-space-12) var(--nexus-space-6);">
  {% include "partials/nexus/organisms/search-bar.html" %}
</section>

{# Featured Categories #}
<section style="max-width: 1400px; margin: 0 auto; padding: 0 var(--nexus-space-6) var(--nexus-space-12);">
  <h2 style="font-size: var(--nexus-text-3xl); font-weight: var(--nexus-weight-bold); color: var(--nexus-fg); margin-bottom: var(--nexus-space-8); text-align: center; text-transform: uppercase; letter-spacing: var(--nexus-tracking-wide);">
    Featured Categories
  </h2>

  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--nexus-space-6);">
    {% include "partials/nexus/molecules/category-card.html" %}

    {% include "partials/nexus/molecules/category-card.html" %}

    {% include "partials/nexus/molecules/category-card.html" %}

    {% include "partials/nexus/molecules/category-card.html" %}

    {% include "partials/nexus/molecules/category-card.html" %}

    {% include "partials/nexus/molecules/category-card.html" %}
  </div>
</section>

{# Vendor CTA #}
{% if logged_in and role == "vendor" %}
<section style="max-width: 1400px; margin: 0 auto; padding: 0 var(--nexus-space-6) var(--nexus-space-8);">
  {% include "partials/nexus/atoms/button.html" %}
</section>
{% endif %}

{# Featured Listings #}
<section style="max-width: 1400px; margin: 0 auto; padding: 0 var(--nexus-space-6) var(--nexus-space-12);">
  <h2 style="font-size: var(--nexus-text-3xl); font-weight: var(--nexus-weight-bold); color: var(--nexus-fg); margin-bottom: var(--nexus-space-8); text-align: center; text-transform: uppercase; letter-spacing: var(--nexus-tracking-wide);">
    Featured Listings
  </h2>

  <div id="listings-results" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: var(--nexus-space-6);">
    {% if listings and listings | length > 0 %}
      {% for listing in listings %}
        {% include "partials/nexus/molecules/product-card.html" %}
      {% endfor %}
    {% else %}
      {# Empty State #}
      <div style="grid-column: 1 / -1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: var(--nexus-space-20); text-align: center;">
        {% include "partials/nexus/molecules/skeleton.html" %}

        <div style="margin-top: var(--nexus-space-8);">
          {% include "partials/nexus/molecules/alert.html" %}
        </div>

        {% if logged_in and role == "vendor" %}
          <div style="margin-top: var(--nexus-space-6);">
            {% include "partials/nexus/atoms/button.html" %}
          </div>
        {% endif %}
      </div>
    {% endif %}
  </div>
</section>

{# Trust Indicators / Features Section #}
<section style="max-width: 1400px; margin: 0 auto; padding: var(--nexus-space-12) var(--nexus-space-6);">
  <h2 style="font-size: var(--nexus-text-3xl); font-weight: var(--nexus-weight-bold); color: var(--nexus-fg); margin-bottom: var(--nexus-space-8); text-align: center; text-transform: uppercase; letter-spacing: var(--nexus-tracking-wide);">
    Why Choose Nexus?
  </h2>

  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--nexus-space-6);">
    {% include "partials/nexus/molecules/card.html" %}

    {% include "partials/nexus/molecules/card.html" %}

    {% include "partials/nexus/molecules/card.html" %}

    {% include "partials/nexus/molecules/card.html" %}
  </div>
</section>

{% endblock %}

{% block scripts %}
<script>
// Auto-refresh listings count every 30 seconds (optional)
setInterval(function() {
  // Could use HTMX to refresh stats
}, 30000);
</script>
{% endblock %}
