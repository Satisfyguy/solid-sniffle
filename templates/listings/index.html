{% extends "base.html" %}

{% block title %}BROWSE LISTINGS ‚Äî AMAZAWN{% endblock %}

{% block content %}
<!-- HERO SECTION -->
<section class="hero">
    <h1><img src="/static/amazawn_logo_v3_white_only.svg" alt="Amazawn Logo" class="hero-logo"> AMAZAWN<br>NON-CUSTODIAL MARKETPLACE</h1>
    <p>2-OF-3 MULTISIG ESCROW ‚Äî ZERO KNOWLEDGE ‚Äî XMR ONLY</p>

    <!-- Search bar -->
    <div class="search-container">
        <div class="search-box">
            <input
                type="search"
                name="q"
                placeholder="SEARCH A PRODUCT..."
                hx-get="/api/listings/search"
                hx-trigger="keyup changed delay:500ms"
                hx-target="#listings-results"
                hx-swap="innerHTML"
                hx-indicator=".htmx-indicator"
            >
            <button type="button">
                ‚Üí <span class="htmx-indicator">...</span>
            </button>
        </div>
    </div>
</section>

<!-- CATEGORIES -->
<section class="categories">
    <a href="#electronics" class="category-item">
        <h3>‚ö°</h3>
        <h3>ELECTRONICS</h3>
        <span class="count">‚Äî ITEMS</span>
    </a>
    <a href="#resources" class="category-item">
        <h3>üìö</h3>
        <h3>RESOURCES</h3>
        <span class="count">‚Äî ITEMS</span>
    </a>
    <a href="#services" class="category-item">
        <h3>üíº</h3>
        <h3>SERVICES</h3>
        <span class="count">‚Äî ITEMS</span>
    </a>
    <a href="#collectibles" class="category-item">
        <h3>üé®</h3>
        <h3>COLLECTIBLES</h3>
        <span class="count">‚Äî ITEMS</span>
    </a>
    <a href="#digital-art" class="category-item">
        <h3>üñºÔ∏è</h3>
        <h3>DIGITAL ART</h3>
        <span class="count">‚Äî ITEMS</span>
    </a>
    <a href="#other" class="category-item">
        <h3>‚Ä¢‚Ä¢‚Ä¢</h3>
        <h3>OTHER</h3>
        <span class="count">‚Äî ITEMS</span>
    </a>
</section>

<!-- LISTINGS -->
<section class="listings-section">
    {% if logged_in and role == "vendor" %}
    <div style="margin-bottom: 40px;">
        <a href="/listings/new" class="btn btn-primary">+ CREATE NEW LISTING</a>
    </div>
    {% endif %}

    <h2 class="section-title">‚Äî FEATURED</h2>

    <div id="listings-results" class="listings-grid">
        {% if listings %}
            {% for listing in listings %}
            <a href="/listings/{{ listing.id }}" class="listing-card" style="text-decoration: none;">
                <div class="listing-image">
                    üíª
                </div>
                <div class="listing-content">
                    <div class="listing-title">{{ listing.title | upper }}</div>



                    <div class="rating">
                        ‚òÖ ‚Äî <span class="separator">‚Äî</span> ‚Äî REVIEWS
                    </div>

                    <div class="listing-footer">
                        <div>
                            <div class="price">{{ listing.price_xmr }}</div>
                            <div class="price-currency">XMR</div>
                        </div>
                        <span class="listing-badge status-{{ listing.status }}">{{ listing.status | upper }}</span>
                    </div>
                </div>
            </a>
            {% endfor %}
        {% else %}
            <div style="grid-column: 1 / -1; text-align: center; padding: 80px 40px;">
                <p style="color: #888; font-size: 11px; letter-spacing: 1px; text-transform: uppercase;">
                    NO LISTINGS AVAILABLE YET
                </p>
                {% if logged_in and role == "vendor" %}
                <a href="/listings/new" class="btn btn-primary" style="margin-top: 20px;">CREATE THE FIRST ONE</a>
                {% endif %}
            </div>
        {% endif %}
    </div>
</section>
{% endblock %}
