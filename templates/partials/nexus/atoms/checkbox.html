{#
  NEXUS CHECKBOX COMPONENT

  Usage:
    {% include "partials/nexus/atoms/checkbox.html" %}

  Parameters:
    - name (required): Checkbox name attribute
    - label (required): Label text
    - checked (optional): true|false (default: false)
    - value (optional): Checkbox value (default: "on")
    - required (optional): true|false (default: false)
    - disabled (optional): true|false (default: false)
    - error (optional): Error message
    - class (optional): Additional CSS classes
    - id (optional): Element ID
#}

{% set checkbox_id = id | default(value=name) %}
{% set checkbox_value = value | default(value="on") %}
{% set checkbox_checked = checked | default(value=false) %}
{% set checkbox_required = required | default(value=false) %}
{% set checkbox_disabled = disabled | default(value=false) %}

{# Build CSS classes #}
{% set css_classes = "nexus-checkbox" %}
{% if error %}
  {% set css_classes = css_classes ~ " nexus-checkbox-error" %}
{% endif %}
{% if class %}
  {% set css_classes = css_classes ~ " " ~ class %}
{% endif %}

<div class="nexus-checkbox-wrapper">
  <div class="nexus-checkbox-container">
    <input
      type="checkbox"
      id="{{ checkbox_id }}"
      name="{{ name }}"
      value="{{ checkbox_value }}"
      class="{{ css_classes }}"
      {% if checkbox_checked %}checked{% endif %}
      {% if checkbox_required %}required{% endif %}
      {% if checkbox_disabled %}disabled{% endif %}
      {% if error %}aria-invalid="true" aria-describedby="{{ checkbox_id }}-error"{% endif %}
    >
    <label for="{{ checkbox_id }}" class="nexus-checkbox-label">
      {{ label }}
      {% if checkbox_required %}<span class="nexus-label-required">*</span>{% endif %}
    </label>
  </div>

  {# Error message #}
  {% if error %}
    <span id="{{ checkbox_id }}-error" class="nexus-input-error-message" role="alert">
      {{ error }}
    </span>
  {% endif %}
</div>

<style>
.nexus-checkbox-wrapper {
  display: flex;
  flex-direction: column;
  gap: var(--nexus-space-2);
}

.nexus-checkbox-container {
  display: flex;
  align-items: center;
  gap: var(--nexus-space-2);
}

.nexus-checkbox {
  width: 1.25rem;
  height: 1.25rem;
  border: 2px solid var(--nexus-border);
  border-radius: var(--nexus-radius-sm);
  background-color: var(--nexus-input);
  cursor: pointer;
  transition: all var(--nexus-transition-base) var(--nexus-ease-out);
  flex-shrink: 0;
}

.nexus-checkbox:checked {
  background-color: var(--nexus-primary);
  border-color: var(--nexus-primary);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%230a0a0a' d='M6.5 11.5L3 8l1-1 2.5 2.5L11 5l1 1z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
}

.nexus-checkbox:focus {
  outline: 2px solid var(--nexus-ring);
  outline-offset: 2px;
}

.nexus-checkbox:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.nexus-checkbox-error {
  border-color: var(--nexus-destructive);
}

.nexus-checkbox-label {
  font-size: var(--nexus-text-sm);
  color: var(--nexus-fg);
  cursor: pointer;
  user-select: none;
}

.nexus-checkbox:disabled + .nexus-checkbox-label {
  opacity: 0.5;
  cursor: not-allowed;
}
</style>
