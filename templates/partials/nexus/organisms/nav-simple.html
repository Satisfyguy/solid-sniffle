{# NEXUS SIMPLE HEADER - Transparent avec NX logo et typewriter absurde #}

<header class="nexus-simple-header">
  <div class="nexus-simple-header-inner">

    {# ========== LOGO + TYPEWRITER ========== #}
    <div class="nexus-simple-logo-zone">
      <a href="/" class="nexus-simple-logo" hx-boost="true">NX</a>
      <div class="nexus-simple-typewriter">
        <span id="nexus-simple-typewriter-text"></span>
        <span class="nexus-simple-cursor">|</span>
      </div>
    </div>

    {# ========== NAVIGATION ========== #}
    <nav class="nexus-simple-nav">
      <a href="/" hx-boost="true">HOME</a>
      <span class="nexus-simple-separator">•</span>
      <a href="/listings#categories">CATEGORIES</a>
      <span class="nexus-simple-separator">•</span>
      <a href="/listings" hx-boost="true">LISTINGS</a>
      <span class="nexus-simple-separator">•</span>
      <a href="/vendors" hx-boost="true">VENDORS</a>
    </nav>

    {# ========== ZONE DROITE ========== #}
    <div class="nexus-simple-actions">

      {# Toggle Dark/Light #}
      <button class="nexus-simple-toggle" id="nexus-simple-toggle" aria-label="Toggle theme">
        <div class="nexus-simple-toggle-slider"></div>
      </button>

      {# Auth #}
      {% if logged_in %}
        <span class="nexus-simple-username">{{ username | upper }}</span>
        <form action="/logout" method="POST" style="display: inline; margin: 0;">
          <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
          <button type="submit" class="nexus-simple-btn nexus-simple-btn-logout">LOGOUT</button>
        </form>
      {% else %}
        <a href="/login" class="nexus-simple-btn nexus-simple-btn-login" hx-boost="true">LOGIN</a>
        <a href="/register" class="nexus-simple-btn nexus-simple-btn-signup" hx-boost="true">SIGN UP</a>
      {% endif %}
    </div>

  </div>
</header>

{# Theme toggle script #}
<script>
(function() {
  const toggle = document.getElementById('nexus-simple-toggle');
  if (!toggle) return;

  const savedTheme = localStorage.getItem('nexus-theme') || 'dark';
  if (savedTheme === 'light') {
    document.body.classList.add('light-mode');
    toggle.classList.add('light');
  }

  toggle.addEventListener('click', function() {
    const isLight = document.body.classList.toggle('light-mode');
    toggle.classList.toggle('light');
    localStorage.setItem('nexus-theme', isLight ? 'light' : 'dark');
  });
})();
</script>
