<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panier - Nexus Marketplace</title>
    <meta name="description" content="Votre panier sécurisé sur Nexus marketplace">
    
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body>
    {% include "header.html" %}
    
    <main class="container mx-auto px-6 pt-24 pb-12">
      <!-- Header -->
      <div class="mb-12 space-y-4">
        <h1 class="text-5xl font-light tracking-tight">
          Votre <span class="text-accent">Panier</span>
        </h1>
        <p class="text-muted-foreground max-w-2xl font-light">
          Vérifiez vos articles avant de procéder au paiement sécurisé avec escrow multisig.
        </p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Cart Items -->
        <div class="lg:col-span-2 space-y-4">
          {% if cart_items and cart_items | length > 0 %}
            {% for item in cart_items %}
              <div class="card">
                <div class="card-content">
                  <div class="flex-1">
                    <h3 class="card-title">{{ item.title }}</h3>
                    <p class="card-description">
                      Vendeur: {{ item.vendor }}
                    </p>
                  </div>
                  <div class="flex items-center gap-6">
                    <span class="text-lg font-light text-accent">{{ item.price }}</span>
                    <button class="btn btn-ghost btn-icon text-destructive hover:text-destructive">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
                    </button>
                  </div>
                </div>
              </div>
            {% endfor %}
          {% else %}
            <div class="card">
              <div class="card-content flex flex-col items-center justify-center py-12">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="text-muted-foreground mb-4"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
                <p class="text-muted-foreground font-light mb-4">Votre panier est vide</p>
                <a href="/listings">
                  <button class="btn btn-outline">Explorer les listings</button>
                </a>
              </div>
            </div>
          {% endif %}
        </div>

        <!-- Order Summary -->
        <div class="lg:col-span-1">
          <div class="card sticky top-24">
            <div class="card-header">
              <h3 class="card-title">Récapitulatif</h3>
            </div>
            <div class="card-content space-y-4">
              <div class="space-y-2">
                <div class="flex justify-between font-light">
                  <span class="text-muted-foreground">Sous-total</span>
                  <span>{{ total }}</span>
                </div>
                <div class="flex justify-between font-light">
                  <span class="text-muted-foreground">Frais d'escrow (3%)</span>
                  <span>{{ escrow_fee }}</span>
                </div>
              </div>
              
              <hr class="separator">
              
              <div class="flex justify-between text-lg">
                <span class="font-light">Total</span>
                <span class="font-light text-accent">{{ final_total }}</span>
              </div>

              <div class="pt-4 space-y-3">
                <button class="btn btn-lg w-full">
                  Procéder au paiement
                </button>
                <a href="/listings" class="block">
                  <button class="btn btn-outline btn-lg w-full">
                    Continuer vos achats
                  </button>
                </a>
              </div>

              <div class="pt-4 border-t border-border">
                <p class="text-xs text-muted-foreground font-light leading-relaxed">
                  Protection escrow multisig 2/3. Vos fonds restent sous votre contrôle jusqu'à la finalisation de la transaction.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="/static/js/lucide.min.js"></script>
    <script src="/static/js/base.js"></script>
</body>
</html>
